var dragNdrop=function(e){function t(e){L?o(e):(e.style.position=C?"auto":"relative",e.style.zIndex="999",z&&"x"===z||"y"===z?e.style.cursor="x"===z?"col-resize":"row-resize":e.style.cursor="move")}function o(e){var t=N(e,"position");t&&"static"!==t?e.style.position=t:e.style.position=C?"auto":"relative";var o=N(e,"zIndex");o&&"auto"!==o?e.style.zIndex=o:e.style.zIndex="999";var n=N(e,"cursor");n&&"auto"!==o?e.style.cursor=n:z&&"x"===z||"y"===z?e.style.cursor="x"===z?"col-resize":"row-resize":e.style.cursor="move"}function n(e){g("start"),E(b,"dragNdrop--stop"),h(b,"dragNdrop--start");var t="touches"in e?e.touches[0]:e;t.preventDefault?t.preventDefault():t.returnValue=!1,r(b,t),b.style.zIndex=parseInt(b.style.zIndex)+1;var o=document.body.style;o.cursor=o.cursor&&"inherit"!==o.cursor?o.cursor:b.style.cursor,d()}function r(e,t){if(_={x:t.pageX||t.clientX,y:t.pageY||t.clientY},C){var o=e.style.transform.split("translate3d(")[1],n=!!o&&o.split(",");S.x=parseInt(n[0])||0,S.y=parseInt(n[1])||0}else S.x=parseInt(N(e,"left"))||0,S.y=parseInt(N(e,"top"))||0}function d(){document.addEventListener?(document.addEventListener("mousemove",s,!1),document.addEventListener("touchmove",s,!1),document.addEventListener("mouseup",m,!1),document.addEventListener("touchend",m,!1)):(document.attachEvent("onmousemove",s),document.attachEvent("touchmove",s),document.attachEvent("onmouseup",m),document.attachEvent("touchend",m))}function s(e){var t;g("drag"),E(b,"dragNdrop--start"),h(b,"dragNdrop--drag"),I&&f(b,I),"touches"in e?(e.preventDefault(),t=e.touches[0]):t=e,a(b,t,z)}function a(e,t,o){var n={x:t.pageX||t.clientX,y:t.pageY||t.clientY},r={x:n.x-_.x,y:n.y-_.y};_={x:n.x,y:n.y},u(e,r,o)}function u(e,t,o){o&&o!==!1?c(e,t,o):l(e,{x:S.x+t.x,y:S.y+t.y})}function c(e,t,o){"x"===o?l(e,{x:S.x+t.x,y:S.y}):"y"===o?l(e,{x:S.x,y:S.y+t.y}):T&&(l(e,{x:S.x+t.x,y:S.y+t.y}),p(e,o,!1))}function l(e,t){S={x:t.x,y:t.y},C?(e.style.transform="translate3d("+t.x+"px ,"+t.y+"px , 1px)",e.style.webkitTransform="translate3d("+t.x+"px ,"+t.y+"px , 1px)"):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function p(e,t,o){if(e===t)return!1;for(var n={x:window.scrollY||document.documentElement.scrollTop,y:window.scrollX||document.documentElement.scrollLeft},r={top:t.getBoundingClientRect().top+n.y,left:t.getBoundingClientRect().left+n.x},d={top:t.offsetHeight,left:t.offsetWidth},s={top:e.getBoundingClientRect().top+n.y,left:e.getBoundingClientRect().left+n.x},a={top:e.offsetHeight,left:e.offsetWidth},u=["top","left","top","left"],c=[],l=0,p=u.length;l<p;l++)l<p/2?s[u[l]]>=r[u[l]]?c.push(!0):(c.push(!1),o||i(e,u[l],r[u[l]]-s[u[l]])):s[u[l]]+a[u[l]]<=r[u[l]]+d[u[l]]?c.push(!0):(c.push(!1),o||i(e,u[l],r[u[l]]+d[u[l]]-(s[u[l]]+a[u[l]])));return c[0]&&c[1]&&c[2]&&c[3]}function i(e,t,o){"top"===t?l(e,{y:S.y+o,x:S.x}):l(e,{y:S.y,x:S.x+o})}function m(){g("stop"),E(b,"dragNdrop--drag"),h(b,"dragNdrop--stop");var e=!1;I&&(e=v(b,I)),R&&R({element:b,dropped:e,dropZones:I,constraints:z,customStyles:L,useTransform:C}),y(),b.style.zIndex=parseInt(b.style.zIndex)-1,document.body.style.cursor=V}function y(){document.addEventListener?(document.removeEventListener("mousemove",s,!1),document.removeEventListener("touchmove",s,!1),document.removeEventListener("mouseup",m,!1),document.removeEventListener("touchend",m,!1)):(document.detachEvent("onmousemove",s),document.detachEvent("touchmove",s),document.detachEvent("onmouseup",m),document.detachEvent("touchend",m))}function f(e,t){E(e,"dragNdrop--dropped"),h(e,"dragNdrop--dropable");for(var o=0;o<t.length;o++){var n=t[o];E(n,"dragNdrop__dropzone--dropped"),h(n,"dragNdrop__dropzone--ready")}}function v(e,t){E(e,"dragNdrop--dropable"),E(e,"dragNdrop--dropped");for(var o=[],n=0;n<t.length;n++){var r=t[n];E(r,"dragNdrop__dropzone--ready"),E(r,"dragNdrop__dropzone--dropped"),p(e,r,!0)&&(g("dropped"),h(e,"dragNdrop--dropped"),h(r,"dragNdrop__dropzone--dropped"),o.push(r))}return o.length>0&&o}function g(e){var t;"function"==typeof Event?(t=new Event("dragNdrop:"+e),b.dispatchEvent(t)):document.createEvent&&(t=document.createEvent("CustomEvent"),t.initEvent("dragNdrop:"+e,!0,!0),b.dispatchEvent(t))}function x(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function h(e,t){x(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}function E(e,t){if(x(e,t))if(e.classList)e.classList.remove(t);else{var o=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(o," ")}}function N(e,t){return window.getComputedStyle?window.getComputedStyle(e,null)[t]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:e.style[t]}function w(){if(!window.getComputedStyle)return!1;var e,t=document.createElement("p"),o={webkitTransform:"-webkit-transform",transform:"transform"};document.body.insertBefore(t,null);for(var n in o)void 0!==t.style[n]&&(t.style[n]="translate3d(1px,1px,1px)",e=window.getComputedStyle(t).getPropertyValue(o[n]));return document.body.removeChild(t),void 0!==e&&e.length>0&&"none"!==e}e?e&&!e.element&&console.log("ERROR: dragNdrop: please provide an element (options.element) that will be made draggable to the function. See reference at: https://github.com/ThibaultJanBeyer/dragNdrop for more info"):console.log("ERROR: dragNdrop: please provide an options object to the function. See reference at: https://github.com/ThibaultJanBeyer/dragNdrop for more info");var b=e.element,L=e.customStyles,z=e.constraints,I=e.dropZones,R=e.callback,C=!("useTransform"in e)||e.useTransform,S={},_={x:0,y:0},T=z&&"string"==typeof z.innerHTML;if(w()||(console.log("WARNING: dragNdrop: your browser does not support hardware accelerated css. The plugin will still work but do yourself a favor and update your browser."),C=!1),h(b,"dragNdrop"),I)for(var B=0,k=I.length;B<k;B++)h(I[B],"dragNdrop__dropzone");t(b);var V=document.body.style.cursor||"inherit";document.addEventListener?(b.addEventListener("mousedown",n,!1),b.addEventListener("touchstart",n,!1)):(b.attachEvent("onmousedown",n),b.attachEvent("touchstart",n))};"undefined"!=typeof module&&null!==module?module.exports=dragNdrop:window.dragNdrop=dragNdrop;