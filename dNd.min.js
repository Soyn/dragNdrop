function dragNdrop(e){function t(e,t){var o;o=w&&"x"===w||"y"===w?"x"===w?"col-resize":"row-resize":"move";var n={position:x(e,"position")||!z?"relative":"",zIndex:x(e,"zIndex")||"999",cursor:x(e,"cursor")||o};e.style.position=n.position,e.style.zIndex=n.zIndex,e.style.cursor=n.cursor}function o(e){v("start"),h(E,"dragNdrop--stop"),g(E,"dragNdrop--start"),e.preventDefault?e.preventDefault():e.returnValue=!1,E.style.zIndex=E.style.zIndex+1,document.body.style.cursor=document.body.style.cursor?document.body.style.cursor:E.style.cursor;var t;t="touches"in e?e.touches[0]:e,I={x:t.pageX||t.clientX,y:t.pageY||t.clientY},n()}function n(){document.addEventListener?(document.addEventListener("mousemove",r,!1),document.addEventListener("touchmove",r,!1),document.addEventListener("mouseup",l,!1),document.addEventListener("touchend",l,!1)):(document.attachEvent("onmousemove",r),document.attachEvent("touchmove",r),document.attachEvent("onmouseup",l),document.attachEvent("touchend",l))}function r(e){var t;v("drag"),h(E,"dragNdrop--start"),g(E,"dragNdrop--drag"),L&&m(E,L),"touches"in e?(e.preventDefault(),t=e.touches[0]):t=e,d(E,t,w)}function d(e,t,o){var n={x:t.pageX||t.clientX,y:t.pageY||t.clientY},r={x:n.x-I.x,y:n.y-I.y};I={x:n.x,y:n.y},a(e,r,o)}function a(e,t,o){o&&o!==!1?s(e,t,o):c(e,{x:R.x+t.x,y:R.y+t.y})}function s(e,t,o){"x"===o?c(e,{x:R.x+t.x,y:R.y}):"y"===o?c(e,{x:R.x,y:R.y+t.y}):_&&(c(e,{x:R.x+t.x,y:R.y+t.y}),u(e,o,!1))}function c(e,t){R={x:t.x,y:t.y},z?(e.style.transform="translate3d("+t.x+"px ,"+t.y+"px , 1px)",e.style.webkitTransform="translate3d("+t.x+"px ,"+t.y+"px , 1px)"):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function u(e,t,o){if(e===t)return!1;for(var n={x:window.scrollY||document.documentElement.scrollTop,y:window.scrollX||document.documentElement.scrollLeft},r={top:t.getBoundingClientRect().top+n.y,left:t.getBoundingClientRect().left+n.x},d={top:t.offsetHeight,left:t.offsetWidth},a={top:e.getBoundingClientRect().top+n.y,left:e.getBoundingClientRect().left+n.x},s={top:e.offsetHeight,left:e.offsetWidth},c=["top","left","top","left"],u=[],l=0,p=c.length;l<p;l++)l<p/2?a[c[l]]>=r[c[l]]?u.push(!0):(u.push(!1),o||i(e,c[l],r[c[l]]-a[c[l]])):a[c[l]]+s[c[l]]<=r[c[l]]+d[c[l]]?u.push(!0):(u.push(!1),o||i(e,c[l],r[c[l]]+d[c[l]]-(a[c[l]]+s[c[l]])));return u[0]&&u[1]&&u[2]&&u[3]}function i(e,t,o){"top"===t?c(e,{y:R.y+o,x:R.x}):c(e,{y:R.y,x:R.x+o})}function l(){v("stop"),h(E,"dragNdrop--drag"),g(E,"dragNdrop--stop");var e=!1;L&&(e=f(E,L)),b&&b({element:E,dropped:e,dropZones:L,constraints:w,customStyles:N}),p(),E.style.zIndex=E.style.zIndex-1,document.body.style.cursor=X}function p(){document.addEventListener?(document.removeEventListener("mousemove",r,!1),document.removeEventListener("touchmove",r,!1),document.removeEventListener("mouseup",l,!1),document.removeEventListener("touchend",l,!1)):(document.detachEvent("onmousemove",r),document.detachEvent("touchmove",r),document.detachEvent("onmouseup",l),document.detachEvent("touchend",l))}function m(e,t){h(e,"dragNdrop--dropped"),g(e,"dragNdrop--dropable");for(var o=0;o<t.length;o++){var n=t[o];h(n,"dragNdrop__dropzone--dropped"),g(n,"dragNdrop__dropzone--ready")}}function f(e,t){h(e,"dragNdrop--dropable"),h(e,"dragNdrop--dropped");for(var o=[],n=0;n<t.length;n++){var r=t[n];h(r,"dragNdrop__dropzone--ready"),h(r,"dragNdrop__dropzone--dropped"),u(e,r,!0)&&(v("dropped"),g(e,"dragNdrop--dropped"),g(r,"dragNdrop__dropzone--dropped"),o.push(r))}return o.length>0&&o}function v(e){var t;"function"==typeof Event?(t=new Event("dragNdrop:"+e),E.dispatchEvent(t)):document.createEvent&&(t=document.createEvent("CustomEvent"),t.initEvent("dragNdrop:"+e,!0,!0),E.dispatchEvent(t))}function y(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function g(e,t){y(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}function h(e,t){if(y(e,t))if(e.classList)e.classList.remove(t);else{var o=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(o," ")}}function x(e,t){return window.getComputedStyle?window.getComputedStyle(e,null)[t]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:e.style[t]}e?e&&!e.element&&console.log("ERROR: dragNdrop: please provide an element (options.element) that will be made draggable to the function. See reference at: https://github.com/ThibaultJanBeyer/dragNdrop for more info"):console.log("ERROR: dragNdrop: please provide an options object to the function. See reference at: https://github.com/ThibaultJanBeyer/dragNdrop for more info");var E=e.element,N=e.customStyles,w=e.constraints,L=e.dropZones,b=e.callback,z=!("transform"in e)||e.transform,R={x:x(E,"left")||0,y:x(E,"top")||0},I={x:0,y:0},_=w&&"string"==typeof w.innerHTML,S=document.createElement("div");S.innerHTML='<!--[if lt IE 9]><i id="ie-version-below-nine"></i><![endif]--><!--[if IE 9]><i id="ie-version-nine"></i><![endif]-->';var C=1==S.getElementsByTagName("i").length;if(C&&(console.log("WARNING: dragNdrop: a browser older than IE 10 detected! "," (use top/left position instead of transform, attachEvent instead of addEventListener and initEvent instead of new Event constructor)"),console.log("WARNING: dragNdrop: the tool will probably work but please do yourself a favor and update your browser"),z=!1),g(E,"dragNdrop"),L)for(var B=0,T=L.length;B<T;B++)g(L[B],"dragNdrop__dropzone");N||t(E,N);var X=document.body.style.cursor||"inherit";document.addEventListener?(E.addEventListener("mousedown",o,!1),E.addEventListener("touchstart",o,!1)):(E.attachEvent("onmousedown",o),E.attachEvent("touchstart",o))}