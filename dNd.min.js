function dragNdrop(e){function t(){u("start"),g(m,"dragNdrop--stop"),f(m,"dragNdrop--start"),document.addEventListener("mousemove",r,!1),document.addEventListener("touchmove",r,!1),document.addEventListener("mouseup",a,!1),document.addEventListener("touchend",a,!1)}function o(e){var t,o=e.style;o.position="absolute",t=N&&"x"===N||"y"===N?"x"===N?"col-resize":"row-resize":"move",o.cursor=t}function r(e){var t;u("drag"),g(m,"dragNdrop--start"),f(m,"dragNdrop--drag"),y&&i(m,y),"touches"in e?(e.preventDefault(),t=e.touches[0]):t=e,n(m,t,N)}function n(e,t,o){var r={h:e.offsetHeight,w:e.offsetWidth},n={x:t.pageX-r.w/2,y:t.pageY-r.h/2};d(e,n,o)}function d(e,t,o){o&&o!==!1?s(e,t,o):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function s(e,t,o){"x"===o?e.style.left=t.x+"px":"y"===o?e.style.top=t.y+"px":"string"==typeof o.innerHTML&&(e.style.left=t.x+"px",e.style.top=t.y+"px",p(e,o,!1))}function p(e,t,o){for(var r={top:t.getBoundingClientRect().top+window.scrollY,left:t.getBoundingClientRect().left+window.scrollX},n={top:t.offsetHeight,left:t.offsetWidth},d={top:e.getBoundingClientRect().top+window.scrollY,left:e.getBoundingClientRect().left+window.scrollX},s={top:e.offsetHeight,left:e.offsetWidth},p=["top","left","top","left"],a=[],i=0,c=p.length;i<c;i++)i<c/2?d[p[i]]>=r[p[i]]?a.push(!0):(a.push(!1),o||(e.style[p[i]]=r[p[i]]+"px")):d[p[i]]+s[p[i]]<=r[p[i]]+n[p[i]]?a.push(!0):(a.push(!1),o||(e.style[p[i]]=r[p[i]]+n[p[i]]-s[p[i]]+"px"));return a.every(function(e){return e===!0})}function a(){u("stop"),g(m,"dragNdrop--drag"),f(m,"dragNdrop--stop");var e=!1;y&&(e=c(m,y)),E&&E({element:m,dropped:e,dropElements:y,constraints:N,customStyles:h}),document.removeEventListener("mousemove",r,!1),document.removeEventListener("touchmove",r,!1),document.removeEventListener("mouseup",a,!1),document.removeEventListener("touchend",a,!1)}function i(e,t){g(e,"dragNdrop--dropped"),f(e,"dragNdrop--dropable");for(var o=0;o<t.length;o++){var r=t[o];g(r,"dragNdrop__drop--dropped"),f(r,"dragNdrop__drop--ready")}}function c(e,t){function o(e){return!!e&&(s.push(e),!0)}g(e,"dragNdrop--dropable"),g(e,"dragNdrop--dropped");for(var r=[],n=0;n<t.length;n++){var d=t[n];g(d,"dragNdrop__drop--ready"),p(e,d,!0)?(u("dropped"),f(e,"dragNdrop--dropped"),f(d,"dragNdrop__drop--dropped"),r.push(d)):(g(d,"dragNdrop__drop--dropped"),r.push(!1))}var s=[];return!!r.some(o)&&s}function u(e){var t;v?(t=document.createEvent("dragNdrop:"+e),t.initEvent("dragNdrop:"+e,!0,!0)):t=new Event("dragNdrop:"+e),m.dispatchEvent(t)}function l(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function f(e,t){e.classList?e.classList.add(t):l(e,t)||(e.className+=" "+t)}function g(e,t){if(e.classList)e.classList.remove(t);else if(l(e,t)){var o=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(o," ")}}var v=!1,m=e.element,h=e.customStyles,N=e.constraints,y=e.dropElements,E=e.callback;f(m,"dragNdrop"),h||o(m),m.addEventListener("mousedown",t,!1),m.addEventListener("touchstart",t,!1)}